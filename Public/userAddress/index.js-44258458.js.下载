!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pages/pc/address/index",[],t):"object"==typeof exports?exports["pages/pc/address/index"]=t():e["pages/pc/address/index"]=t()}(this,function(){return function(e){function t(s){if(a[s])return a[s].exports;var i=a[s]={exports:{},id:s,loaded:!1};try{e[s].call(i.exports,i,i.exports,t)}catch(d){if("string"==typeof d&&(d=new Error(d)),d.hasReported)return;throw d.hasReported=!0,window._trace&&window._trace.sendMsg&&"function"==typeof window._trace.sendMsg&&window._trace.sendMsg(d),console&&console.warn&&console.warn(d),d}return i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";window.pub_navlist_wrap_init&&pub_navlist_wrap_init.init();var s=a(1),i=a(4),d=a(3),n={init:function(){this.render()},render:function(){var e=this;$.ajax({url:"/ajax/getReceiveAddressListActionlet/1",dataType:"json",type:"POST"}).done(function(t){if("SESSION_INVALID"==t.returnCode)return void(location.href=d.getURLWithPtp("http://portal.mogujie.com/user/login"));if("success"==t.returnCode){var a=MoGu.ui.getTemplate(i,t.data);$("#address_wrap").html(a),e.bindEvent()}else alert(t.message)}).fail(function(){})},bindEvent:function(){$(".J_default").on("click",this.setDefault),$(".oper").on("click",".del",this.delAddress),$(".edit").on("click",this.editAddress),$("#J_saddAddress").on("click",this.addAddress)},addAddress:function(){s.init()},editAddress:function(e){s.init($(this).attr("aid"))},delAddress:function(){var e=$(this).attr("aid");$.ajax({url:"/ajax/deleteReceiveAddressActionlet/1",dataType:"json",type:"POST",data:{addressId:e}}).done(function(e){return"SESSION_INVALID"==e.returnCode?void(location.href=d.getURLWithPtp("http://portal.mogujie.com/user/login")):void("success"==e.returnCode?e.data&&location.reload():alert(e.message))}).fail(function(){})},setDefault:function(){var e=$(this).attr("aid");$.ajax({url:"/ajax/setReceiveAddressDefaultActionlet/1",type:"POST",dataType:"json",data:{addressId:e}}).done(function(e){return"SESSION_INVALID"==e.returnCode?void(location.href=d.getURLWithPtp("http://portal.mogujie.com/user/login")):void("success"==e.returnCode?location.reload():alert(e.message))}).fail(function(){})}};n.init(),e.exports=n},function(e,t,a){"use strict";var s=a(2),i=a(3),d=(['<option value="0">\u8bf7\u9009\u62e9</option>',"{{~ it:city:index}}",'<option value="{{=city.id}}" {{? (city.id == it.selected)}} selected="selected" {{?}}>{{=city.name}}</option>',"{{~}}"].join(""),{init:function(e){this.provinceWrap=$("#J_province"),this.cityWrap=$("#J_city"),this.areaWrap=$("#J_area"),this.addressId=e,void 0!=e?this.render(e):this.renderBlank()},renderBlank:function(){var e={},t=this;e.address=[{province:"",city:"",area:"",street:"",addressId:"",realName:"",phone:"",isDefault:!1,zip:"",mobile:"",address:""}],$.ajax({url:"http://s20.mogucdn.com/new1/v1/bmisc/f1ef4f813b6d8f91b4013d10c09b034f/143450238484.json",dataType:"json",type:"POST"}).done(function(a){t.locations=a.result.location;e.address.province,t.locations[0][0].id;e.location=t.locations;var i=MoGu.ui.getTemplate(s,e);$(".address_wrapper").html(i),$(".address_wrapper").show(),t.select(),t.bindEvent()}).fail(function(){})},render:function(e){var t=this;this.model||(this.model={}),$.ajax({url:"/ajax/getReceiveAddressByAddressIdActionlet/1",dataType:"json",type:"POST",data:{addressId:e}}).done(function(e){if("SESSION_INVALID"==e.returnCode)return void(location.href=i.getURLWithPtp("http://portal.mogujie.com/user/login"));if("success"==e.returnCode){var a={};a.address=[],a.address.push(e.data),t.model.mobile=e.data&&e.data.mobile||"",t.model.hidePartMobile=e.data&&e.data.hidePartMobile||"",$.ajax({url:"http://s20.mogucdn.com/new1/v1/bmisc/f1ef4f813b6d8f91b4013d10c09b034f/143450238484.json",dataType:"json",type:"POST"}).done(function(i){t.locations=i.result.location;a.address.province,t.locations[0][0].id;a.location=t.locations;var d=MoGu.ui.getTemplate(s,a);$(".address_wrapper").html(d),$(".address_wrapper").show(),t.selectArea(),t.bindEvent(),t.setLocation(e.data.province,e.data.city,e.data.area)}).fail(function(){})}else alert(e.message),location.reload()}).fail(function(){})},bindEvent:function(){$(".confirm_btn").on("click",this.modify.bind(this)),$(".J_cancelbtn").on("click",this.cancelEdit)},cancelEdit:function(){$(".address_wrapper").html("")},modify:function(){var e,t,a;$(".J_province").find("option").each(function(t,a){$(a).val()==$(".J_province").val()&&(e=$(a).text())}),$(".J_city").find("option").each(function(e,a){$(a).val()==$(".J_city").val()&&(t=$(a).text())}),$(".J_area").find("option").each(function(e,t){$(t).val()==$(".J_area").val()&&(a=$(t).text())});var s=$(".J_addressid").val(),d=$(".J_name").val(),n=$(".J_mobile").val(),r=$(".J_postcode").val(),o=$(".J_isdefault").val(),c=$(".J_street").val();if("\u8bf7\u9009\u62e9"==e||""==t||""==a)return void $(".city_select").addClass("notice").text("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u5730\u5740");if($(".city_select").removeClass("notice").text(""),!/^[0-9]{6}/.test(r)||6!=r.length)return $(".J_postcode").addClass("error"),void $(".mail_select").addClass("notice").text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u653f\u7f16\u7801");if($(".J_postcode").removeClass("error"),$(".mail_select").removeClass("notice").text(""),c.length<5||c.length>100)return $(".J_street").addClass("error"),void $(".breakline").addClass("notice").text("\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57");if($(".J_street").removeClass("error"),$(".breakline").removeClass("notice").text(""),""==d)return $(".J_name").addClass("error"),void $(".name_select").addClass("notice").text("\u8bf7\u586b\u5199\u6536\u8d27\u4eba");if($(".J_name").removeClass("error"),$(".name_select").removeClass("notice").text(""),-1!=(""+n).indexOf("*")){if(n!=this.model.hidePartMobile)return void $(".mobile_select").addClass("notice").text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8054\u7cfb\u53f7\u7801");n=this.model.mobile,$(".J_mobile").removeClass("error"),$(".mobile_select").removeClass("notice").text("")}else{if(!/^[0-1]{1}[34578]{1}[0-9]{9}$/.test(n))return $(".J_mobile").addClass("error"),void $(".mobile_select").addClass("notice").text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8054\u7cfb\u53f7\u7801");$(".J_mobile").removeClass("error"),$(".mobile_select").removeClass("notice").text("")}var l;l=void 0!=this.addressId?"/ajax/modifyReceiveAddressActionlet/1":"/ajax/addReceiveAddressActionlet/1",$.ajax({url:l,data:{province:e,city:t,area:a,street:"",addressId:s,realName:d,phone:"",isDefault:o,zip:r,mobile:n,address:c},type:"POST",dataType:"json"}).done(function(e){return"SESSION_INVALID"==e.returnCode?(alert("\u8bf7\u767b\u5f55"),void(location.href=i.getURLWithPtp("http://portal.mogujie.com/user/login"))):void("success"==e.returnCode?location.reload():alert(e.message))}).fail(function(){})},select:function(e,t,a){var s=this,e=e||$(".J_province").val(),t=t||this.locations[e][0].id,a=a||this.locations[t][0].id,i=this.locations[e],d=this.locations[t],n=['<option value="0">\u8bf7\u9009\u62e9</option>',"{{~ it:city:index}}",'<option value="{{=city.id}}" {{? (city.id == it.selected)}} selected="selected" {{?}}>{{=city.name}}</option>',"{{~}}"].join(""),r=MoGu.ui.getTemplate(n,i);$(".J_city").html(r);var o=MoGu.ui.getTemplate(n,d);$(".J_area").html(o),$(".J_province").off().on("change",function(){s.selectArea($(this).val())}),$(".J_city").on("change",function(){s.selectArea(void 0,$(this).val())})},selectArea:function(e,t,a){var s=this,e=e||$(".J_province").val(),t=t||this.locations[e][0].id,a=a||this.locations[t][0].id,i=this.locations[e],d=this.locations[t];i.selected=t,d.selected=a;var n=['<option value="0">\u8bf7\u9009\u62e9</option>',"{{~ it:city:index}}",'<option value="{{=city.id}}" {{? (city.id == it.selected)}} selected="selected" {{?}}>{{=city.name}}</option>',"{{~}}"].join(""),r=MoGu.ui.getTemplate(n,i);$(".J_city").html(r);var o=MoGu.ui.getTemplate(n,d);$(".J_area").html(o),$(".J_province").off().on("change",function(){s.selectArea($(this).val())}),$(".J_city").on("change",function(){s.selectArea(void 0,$(this).val())})},setLocation:function(e,t,a){var s=$("#home_address-sprovince"),i=$("#home_address-scity"),d=$("#home_address-sarea");s.attr("data-tmp",e),i.attr("data-tmp",t),d.attr("data-tmp",a),this.initSeletion("province"),this.initSeletion("city"),this.initSeletion("area")},initSeletion:function(e){var t=$("#home_address-s"+e),a=t.attr("data-tmp");a&&""!==a&&(t.find("option").each(function(e,s){var i=$(s);return i.html()===a?(t[0].selectedIndex=e,t.trigger("change"),!1):void 0}),t.attr("data-tmp",""))}});e.exports=d},function(e,t){e.exports='<div class="__addressPop">\n    <dl class="address_pop">\n        <input type="hidden" class="J_addressid" name="addressId" value="{{=it.address[0].addressId}}" />\n        <input type="hidden" class="J_isdefault" name="addressId" value="{{=it.address[0].isDefault}}" />\n        <dt>\u7701\uff1a</dt>\n        <dd class="pt_ie6hack">\n            <i class="needicon">*</i>\n            <select name="province" id="home_address-sprovince" class="J_province J_select w140 vm">\n              <option value="0">\u8bf7\u9009\u62e9</option>\n              {{~it.location[0]:city:index}}\n              <option value="{{=city.id}}" {{?city.name==it.address[0].province}}selected{{??}}{{?}}>{{=city.name}}</option>\n              {{~}}\n            </select>\n            <label class="dt" for="">\u5e02\uff1a</label>\n            <select name="city" id="home_address-scity" class="J_city J_select w100 vm"> </select>\n            <label class="dt" for="">\u533a\uff1a</label>\n            <select name="area" id="home_address-sarea" class="J_area J_select w100 vm"> </select>\n            <span class="prompt city_select"></span>\n        </dd>\n        <dt>\u90ae\u653f\u7f16\u7801\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <input type="text" data-type="c" data-errormsg="\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u653f\u7f16\u7801" data-normal="" class="text formsize_normal J_postcode J_form vm" name="postcode" value={{=it.address[0].zip\n            }}>\n            <span class="prompt mail_select"></span>\n        </dd>\n\n        <dt>\u8857\u9053\u5730\u5740\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <textarea data-type="*" data-min="5" data-max="100" data-normal="\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57" data-errormsg="\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57" class="textarea formsize_large J_street J_form" name="street" cols="30" rows="3">{{=it.address[0].address}}</textarea>\n            <span class="prompt breakline">\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57</span>\n        </dd>\n        <dt>\u6536\u8d27\u4eba\u59d3\u540d\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <input type="text" data-type="*" data-errormsg="\u8bf7\u586b\u5199\u6536\u8d27\u4eba" data-normal="" class="text formsize_normal J_name J_form vm" name="name" value={{=it.address[0].realName}}>\n            <span class="prompt name_select"></span>\n        </dd>\n        <dt>\u624b\u673a\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <input type="text" data-type="phone" data-errormsg="\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8054\u7cfb\u53f7\u7801" data-normal="" class="text formsize_normal J_mobile J_form vm" name="mobile" value={{=it.address[0].hidePartMobile || \'\'}}>\n            <span class="prompt mobile_select"></span>\n        </dd>\n        <dt></dt>\n        <dd class="pt10 oper_btn">\n            <a href="javascript:;" class="confirm_btn J_okbtn mr10">\u786e\u8ba4\u5730\u5740</a>\n            <a href="javascript:;" class="cancel_btn J_cancelbtn">\u53d6\u6d88</a>\n        </dd>\n    </dl>\n</div>\n'},function(e,t){"use strict";var a={getURLWithPtp:function(e){return window.logger?logger.generatePtpParams(e):e},escapeHtml:function(e){return"string"!=typeof e?e:e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}};e.exports=a},function(e,t){e.exports='<div class="addr_right topay" isaddress=\'true\'>\n    <h2 class="addr_title">\u5730\u5740\u7ba1\u7406</h2>\n    <div class="addr_edit" id="J_s_addr_edit">\n        <div class="add_new_addr clearfix"><span id="J_saddAddress">+\u6dfb\u52a0\u5730\u5740</span></div>\n        <div class="addressbox_warp">\n            <div class="addressbox" id="J_sAddrWrap"></div>\n            <div class="address_wrapper"></div>\n            <!-- <div class="addressbox addressfirst addresslist" action="/trade/address/addfororder">\n            </div> -->\n        </div>\n        {{~it.receiveAddressList:address:index }}\n        <div class="addr_section {{? address.isDefault==1}}default{{??}}{{?}}" aid="{{=address[\'addressId\']}}">\n            <ul class="clearfix">\n                <li class="name">{{=address[\'realName\']}}</li>\n                <li class="addr"\n                    data-province="{{=address[\'province\']}}"\n                    data-city="{{=address[\'city\']}}"\n                    data-area="{{=address[\'area\']}}"\n                    data-street="{{=address[\'address\']}}">\n                    {{=address[\'province\']}}{{=address[\'city\']}}{{=address[\'area\']}}{{=address[\'address\']}}\n                </li>\n                <li class="zcode">{{=address[\'zip\']}}</li>\n                <li class="mobile">{{=address[\'hidePartMobile\']}}</li>\n                <li class="oper">\n                    <a href="javascript:;" class="J_default" aid={{=address[\'addressId\']}}>{{? address[\'isDefault\']==1 }}\u9ed8\u8ba4\u5730\u5740{{??}}\u8bbe\u4e3a\u9ed8\u8ba4{{?}}</a>\n                    <a href="javascript:;" class="edit" aid={{=address[\'addressId\']}}>\u7f16\u8f91</a>\n                    <a href="javascript:;" class="del nobd" aid={{=address[\'addressId\']}}>\u5220\u9664</a>\n                </li>\n                <li class="enaddr"></li>\n            </ul>\n        </div>\n        {{~}}\n    </div>\n</div>\n'}])}),"function"==typeof define&&define.amd&&require(["pages/pc/address/index"]);!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pages/pc/search/index",[],e):"object"==typeof exports?exports["pages/pc/search/index"]=e():t["pages/pc/search/index"]=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};try{t[o].call(s.exports,s,s.exports,e)}catch(i){if("string"==typeof i&&(i=new Error(i)),i.hasReported)return;throw i.hasReported=!0,window._trace&&window._trace.sendMsg&&"function"==typeof window._trace.sendMsg&&window._trace.sendMsg(i),console&&console.warn&&console.warn(i),i}return s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1)},function(t,e,n){var o,s;o=[],s=function(){function t(t,e){this.init(t,e)}function e(){function t(t){return $.trim(t).replace(/(<|>|'|"|window|alert|eval|$|jQuery)/gi,"")}r.on("keyup keydown",function(n){var o=$(this),s=$("#select_type");if(!s.length||"bao"===s.val()||"5"===s.val())switch(n.keyCode){case 40:if("keyup"==n.type||!a.data("isshow"))break;f.chooseIndex=f.chooseIndex+1>f.tipLength-1?0:++f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 38:if("keyup"==n.type||!a.data("isshow"))break;f.chooseIndex=f.chooseIndex-1<0?f.tipLength-1:--f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 13:if("keyup"==n.type)break;n.preventDefault(),e.submitBefore(f.chooseType,f.chooseIndex),c.submit();break;case 37:break;case 39:break;default:clearTimeout(i),i=setTimeout(function(){var e=t(o.val());m.resetFactory(e)},500)}}).on("focus",function(){var e=$(this),n=$("#select_type");if(i&&clearTimeout(i),!n.length||"bao"===n.val()||"5"===n.val()){var o=t(e.val());clearTimeout(i),i=setTimeout(function(){m.resetFactory(o)},300)}}).on("blur",function(){$("body").bind("click",function(t){$(t.target).parents(".seatch_type_msearch").length||(a.empty().data("isshow",!0).hide(),$("body").unbind("click"))})}),a.on("mouseenter",".search_tip li",function(t){var e=$(this),n=e.index();f.chooseIndex=n,m.changeListTab(n)}).on("click",".search_tip li",function(t){var n=$(this).find(".title").text();$(t.target).hasClass("prop")&&(n+=" "+$(t.target).text()),e.submitBefore(f.chooseType,f.chooseIndex),r.val(n),c.submit()}),a.on("click",".hot_list li",function(){var t=$(this);return e.submitBefore(m.hotTypeName,t.index()),r.val(t.find("span").html()),c.submit(),!1}),a.on("click",".local_del",function(t){var e=$(this),n=e.parent();d.del(n.find(".title").attr("title"));var o=d.getTenItem();return m.updateLocalContent(e,o),f.chooseIndex=-1,f.tipLength=o.length,!1}).on("click",".local_title .del_all",function(){var t=$(this);return d.set(),m.destoryLocalContent(t),t.remove(),f.chooseIndex=-1,f.tipLength=0,!1}),s.on("click",".selectbox a",function(t){t.preventDefault(),m.changeType($(this))}).on("mouseenter",".selectbox",function(){a.hide(),$(this).addClass("sele_hover")}).on("mouseleave",".selectbox",function(){$(this).removeClass("sele_hover")}),c.submit(function(){var n=$(this),o=t(r.val()),s=r.attr("def-v");if(""==o||o==s){if(""==o&&"shop"==$("#select_type").val())return!1;var i=r.data("def");r.val(i||"");var a='<input type="hidden" name="from" value="searchplacehold" id="TJ">';$("#top_nav_form").append(a),setTimeout(function(){$("#TJ").remove()},1e3)}else o==$.trim(r.val())&&"bao"==$("#select_type").val()&&d.addOne(o);if(c.find(".emptyvalue").remove(),n.data("index")>-1&&null!==n.data("type")){var l='<input type="hidden" class="emptyvalue" name="from" value="'+n.data("type")+"querytip"+n.data("index")+'">';c.append(l)}m.destoryContent(),e.submitAfter()}),m.showStickySearch()&&m.initStickySearch()}var n=MoGu.ui.getdoT(),o=MoGu.util.getStore();if(n&&o){var s=$("#nav_search_form");if(s.length){var i,a=$(".top_search_hint"),r=s.find(".ts_txt"),c=$("#top_nav_form"),l=$("#select_type"),h=s.find(".selectbox"),p="/msearch/tips/item",u={nowHost:window.location.host,defultHost:"http://www.mogujie.com",template:'<div class="search_tip_box fl">{{=it.searchResult}}</div>',listItemTemp:['<div class="mr300 tip_wrap">','{{ if(it.titleName && it.titleName != ""){ }}','<h3 class="search_tip_title">{{=it.titleName}}</h3>',"{{ }else{ }}","{{ } }}",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li>",'<a href="javascript:;" class="title" title="{{= item.title }}" >{{= item.title }}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}","</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),localItemTemp:['<div class="mr300 tip_wrap">','<h3 class="search_tip_title local_title clearfix">',"{{ if(it.items.length){ }}",'<span class="del_all">\u5220\u9664</span>',"{{ } }}","\u5386\u53f2\u8bb0\u5f55","</h3>",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}",'<li class="local_item">','<a href="javascript:;" class="title" title="{{=item}}" >{{=item}}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}",'<span class="nums local_del">x</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),hotKeyTpl:['<div class="search_hot_wrap">','<h3 class="search_tip_title hot_title">\u70ed\u95e8\u5173\u952e\u8bcd</h3>','<ul class="hot_list clearfix">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li><span>{{= item.title }}</span></li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),emptyTpl:['<div class="mr300 tip_wrap">','<p class="tip_none">\u6682\u65e0\u76f8\u5173\u70ed\u95e8\u5173\u952e\u8bcd</p>',"</div>"].join("")},d={keyName:"_search_local_history",keyShowName:"_search_local_history_show",maxLength:20,showLength:10,isshow:function(){return!0},abtest:function(t){o.set(this.keyShowName,1)},get:function(){return o.get(this.keyName)||[]},getTenItem:function(){var t=this.get();return t.slice(0,this.showLength)},set:function(t){o.set(this.keyName,t||[])},addOne:function(t){if(t=$.trim(t),""!=t){var e=this.get(),n=$.inArray(t,e);-1==n?(e.unshift(t),e.length>this.maxLength&&e.pop()):(e.splice(n,1),e.unshift(t)),this.set(e)}},del:function(t){t=$.trim(t);var e=this.get(),n=$.inArray(t,e);n>-1&&(e.splice(n,1),this.set(e))}};t.prototype.init=function(t,e){this.chooseIndex=-1,this.chooseType=t,this.tipLength=e||0};var f=new t("undefined"),m={ajaxRequest:null,hotKeyArr:[],isShopHost:function(){return!1},showStickySearch:function(){var t=location.pathname,e=$(".mgj_primary"),n=e.length>0?e.offset().top+e.height():10;return"www.mogujie.com"===location.host&&("/"===t||"/more"===t)||t.indexOf("/book/search/")>-1||/webdemo || localhost/.test(location.host)&&/sticky/.test(location.search)?(t.indexOf("/book/search/")>-1&&(e=$(".search_filter_wrap"),n=e.length?e.offset().top:150),this.stickyTargetTop=n,!0):!1},initSearchForm:function(t){$.ajax({url:"http://search.mogujie.com/jsonp/pcHotWords/1",dataType:"jsonp",type:"get",success:function(e){if(e&&"SUCCESS"==e.returnCode){var n=e.data,o=n.defaultWord,s=n.hotWords,i=c.find(".ts_txt");i.attr("def-v",o).attr("data-def",o).val(o);var a="";$(s).each(function(t,e){var n=['<a rel="nofollow" class="ts_hotword" href="',"http://www.mogujie.com/book/search/",e,"?from=hotword",'">',e,"</a>"].join("");a+=n}),$(".ts_hotwords").html(a)}$.isFunction(t)&&t(e)},fail:function(){}})},resetFactory:function(t){this.isShopHost()?this.resetShopContent(t):d.isshow()?this.resetListContent(t):this.resetOldContent(t)},resetListContent:function(e){function o(t){s(function(){i()})}function s(n){r.ajaxRequest&&r.ajaxRequest.abort();var o=d.getTenItem();return""==$.trim(e)?(c.push(r.renderLocalContent(o)),void($.isFunction(n)&&n())):void(r.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?c.push(r.renderEmptyContent()):(c.push(r.renderSearchContent(e.result.tips,e.result.nums,e.result.props)),f=new t(r.searchTypeName,o))}$.isFunction(n)&&n()},"json"))}function i(){var t=n.template(u.template)({searchResult:c.join("")});a.html(t),r.showContentBox()}var r=this,c=[];r.hotKeyArr.length?o(r.hotKeyArr):$.post(p,{},function(t){r.hotKeyArr=t.result.tips,o(r.hotKeyArr)},"json")},resetShopContent:function(e){function o(n){i.ajaxRequest&&i.ajaxRequest.abort(),i.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?r.push(i.renderEmptyContent()):(r.push(i.renderSearchContent(e.result.tips,e.result.nums,e.result.props,c)),f=new t(l,o))}$.isFunction(n)&&n()},"json")}function s(){var t=n.template(u.template)({searchResult:r.join("")});a.html(t),i.showContentBox()}var i=this,r=[],c="",l=""!=e?i.searchTypeName:i.hotTypeName;o(function(){s()})},resetOldContent:function(e){function o(n){i.ajaxRequest&&i.ajaxRequest.abort(),i.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?r.push(i.renderEmptyContent()):(r.push(i.renderSearchContent(e.result.tips,e.result.nums,c)),f=new t(l,o))}$.isFunction(n)&&n()},"json")}function s(){var t=n.template(u.template)({searchResult:r.join("")});a.html(t),a.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),i.showContentBox()}var i=this,r=[],c=""!=e?"\u641c\u7d22\u7ed3\u679c":"\u70ed\u95e8\u5173\u952e\u8bcd",l=""!=e?i.searchTypeName:i.hotTypeName;o(function(){s()})},searchTypeName:"",renderSearchContent:function(t,e,o,s){for(var i=[],a=0;a<t.length;a++)i.push({title:t[a],props:o[a],num:e[a]});return n.template(u.listItemTemp)({titleName:s||null,items:i})},localTypeName:"local",renderLocalContent:function(t){return n.template(u.localItemTemp)({items:t})},updateLocalContent:function(t,e){var n=t.parent(),o=t.parents(".search_tip");if(n.length&&o.length)if(e.length<d.showLength)n.remove();else{var s=e[d.showLength-1];n.find(".title").attr("title",s).html(s),n.appendTo(o)}},destoryLocalContent:function(t){var e=t.parents(".tip_wrap").find(".search_tip");e.length&&e.empty()},hotTypeName:"default",renderHotContent:function(t){for(var e=[],o=0;o<t.length;o++)e.push({title:t[o]});return n.template(u.hotKeyTpl)({items:e})},renderEmptyContent:function(){return u.emptyTpl},destoryContent:function(){a.empty().hide()},getContentPosition:function(t,e){var n=e.offset(),o=t.data("fixleft"),s=t.data("fixtop");o&&(n.left+=parseInt(o)),s&&(n.top-=parseInt(s));var i=e.width()-34;t.css({left:n.left,top:n.top+e.height()+2,width:i}).addClass("hasposition")},showContentBox:function(){a.show().data("isshow",!0)},changeListTab:function(t){var e=a.find(".search_tip li"),n=e.eq(t);return e.removeClass("checked"),n.addClass("checked"),n.find(".title").text()},changeType:function(t){var e=t.parent(),n=e.attr("data-index"),o=t.text();if(l.val(n),h.find(".selected").text("\u641c"+o),e.siblings("li").removeClass("current"),e.addClass("current"),"shop"==n)r.val()==r.attr("def-v")&&r.val("");else if(""==r.val()){var s=r.attr("def-v");r.val(s)}4==n?"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/group/search/"):c.attr("action","/group/search/"):"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/search"):c.attr("action",u.defultHost+"/search/"),h.removeClass("sele_hover")},initStickySearch:function(){var t=$("#nav_search_form"),e=['<div id="J_sticky_container" class="sticky-search-container">','<div class="wrap">','<a rel="nofollow" href="http://www.mogujie.com" class="logo" title="\u8611\u83c7\u8857|\u6211\u7684\u4e70\u624b\u8857">\u8611\u83c7\u8857|\u6211\u7684\u4e70\u624b\u8857</a>','<div class="sticky-search-content"></div>',"</div>","</div>"].join("");$("body").append(e);var n=$(".sticky-search-container");$(window).off("scroll.sticky").on("scroll.sticky",function(){$(document).scrollTop()>m.stickyTargetTop?n.hasClass("lets-rock")||n.find(".sticky-search-content").append(t).end().addClass("lets-rock"):n.hasClass("lets-rock")&&($(".normal-search-content").append($("#nav_search_form")),n.find(".sticky-search-content").empty().end().removeClass("lets-rock"))})}};e.submitBefore=function(t,e){c.data({type:t,index:e})},e.submitAfter=function(){c.removeData("type index"),f.chooseType="undefined",f.chooseIndex=-1};var v=function(){MoGu.util.inputTextHide(r,"ts_high"),"www.mogujie.com"===u.nowHost||h.parents(".store_header").length||c.attr("action",u.defultHost+"/search/"),e()};m.initSearchForm(v)}}}.apply(e,o),!(void 0!==s&&(t.exports=s))}])}),"function"==typeof define&&define.amd&&require(["pages/pc/search/index"]);